#!/usr/bin/env bash

build_all() {
    cd ~/;

    sudo chown -R coder:coder /tmp/out;
    sudo chown -R coder:coder /tmp/conda-build;

    if type conda >/dev/null 2>&1; then
        . make-conda-env;
    fi
    
    set -xeuo pipefail;
    
    build-legate-cpp;
    build-legate-wheel;
    build-legate-conda;
}

(build_all "$@");
